(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=[].slice,r={}.hasOwnProperty,i=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1};window.FileSystem=function(){function a(e){this.rm=t(this.rm,this),this.type=t(this.type,this),this.walkPathAndFile=t(this.walkPathAndFile,this),this.separateWithFilename=t(this.separateWithFilename,this),this._name=""+e||"undefined",this._getFilesystemObject(),this._cwd=FileSystem.prototype.pathSeparator}var n;return a.prototype.pathSeparator="/",a.prototype.escapeCharacter="\\",a.prototype._storageName=function(){return""+this._name+"_filesystem"},a.prototype._fileName=function(t){return""+this._name+"_file_"+t},a.prototype._getFilesystemObject=function(){var t;return t=JSON.parse(localStorage.getItem(this._storageName())),null===t&&this._setFilesystemObject(t={}),t},a.prototype._setFilesystemObject=function(t){var e;try{return localStorage.setItem(this._storageName(),JSON.stringify(t)),!0}catch(r){return e=r,!1}},a.prototype.getName=function(){return this._name},a.prototype.getCwd=function(){return this._cwd},a.prototype._changeFilesystem=function(t){var e;return t(e=this._getFilesystemObject()),this._setFilesystemObject(e)},n=function(){var t,r,i,a,n,o,s;for(a=arguments[0],n=2<=arguments.length?e.call(arguments,1):[],i="";a.length>0;){for(t=!1,r=o=0,s=n.length-1;s>o;r=o+=2)if(a.slice(0,n[r].length)===n[r]){i+=n[r+1],a=a.slice(n[r].length),t=!0;break}t||(i+=a[0],a=a.slice(1))}return i},a.prototype._splitPath=function(t){var e,r,i,a,o,s,l,h;for(a=FileSystem.prototype.pathSeparator,r=FileSystem.prototype.escapeCharacter,i=t.indexOf(a+a);i>-1;)t=t.slice(0,i)+t.slice(i+a.length),i=t.indexOf(a+a);for(t.slice(0,a.length)===a&&(t=t.slice(a.length)),t.slice(-a.length)===a&&(t=t.slice(0,-a.length)),l=n(t,r+a,a,r+r,r,a,"\n").split("\n"),h=[],o=0,s=l.length;s>o;o++)e=l[o],""!==e&&h.push(e);return h},a.prototype._joinPath=function(t){var e,r,i;return i=FileSystem.prototype.pathSeparator,e=FileSystem.prototype.escapeCharacter,function(){var a,o,s;for(s=[],a=0,o=t.length;o>a;a++)r=t[a],s.push(n(r,i,e+i,e,e+e));return s}().join(i)},a.prototype._toAbsolutePath=function(t,e){var r,i;return i=FileSystem.prototype.pathSeparator,e.slice(0,i.length)===i?e:(r=FileSystem.prototype._joinPath(FileSystem.prototype._splitPath(t).concat(FileSystem.prototype._splitPath(e))),r.slice(0,i.length)!==i&&(r=i+r),r)},a.prototype._toCanonicalPath=function(t){var e,r,i,a,n,o;for(e=[],o=FileSystem.prototype._splitPath(t),a=0,n=o.length;n>a;a++)i=o[a],"."!==i&&(".."===i?e.length>0&&e.pop():e.push(i));return e=FileSystem.prototype._joinPath(e),r=FileSystem.prototype.pathSeparator,e.slice(0,r.length)!==r&&(e=r+e),e},a.prototype._isValidCanonicalPath=function(t){var e,r,i,a,n;for(e=FileSystem.prototype._splitPath(t),i=this._getFilesystemObject(),a=0,n=e.length;n>a;a++)if(r=e[a],i=i[r],!i||i instanceof Array)return!1;return!0},a.prototype.separate=function(t){return FileSystem.prototype._splitPath(FileSystem.prototype._toCanonicalPath(FileSystem.prototype._toAbsolutePath(this._cwd,t)))},a.prototype.separateWithFilename=function(t){var e;return e=this.separate(t),{path:e.slice(0,-1),name:e[e.length-1]}},a.prototype.walkPath=function(t,e){var r,i,a;for(i=0,a=e.length;a>i;i++){if(r=e[i],!t.hasOwnProperty(r)||t[r]instanceof Array)return null;t=t[r]}return t},a.prototype.walkPathAndFile=function(t,e){return 0===e.length?t:(t=this.walkPath(t,e.slice(0,-1)),t?t[e[e.length-1]]||null:null)},a.prototype.type=function(t){var e,r;return r=this.separate(t),e=this.walkPathAndFile(this._getFilesystemObject(),r),e?e instanceof Array?"file":"folder":null},a.prototype.cd=function(t){var e;return null==t&&(t=FileSystem.prototype.pathSeparator),e=FileSystem.prototype._toCanonicalPath(FileSystem.prototype._toAbsolutePath(this._cwd,t)),this._isValidCanonicalPath(e)?this._cwd=e:void 0},a.prototype.mkdir=function(t){var e,r,i,a,n,o,s;for(null==t&&(t="."),a=r=this._getFilesystemObject(),e=!1,s=this.separate(t),n=0,o=s.length;o>n;n++)i=s[n],a.hasOwnProperty(i)||(a[i]={},e=!0),a=a[i];return e&&this._setFilesystemObject(r)},a.prototype.ls=function(t,e){var i,a,n,o;if(null==t&&(t="."),null==e&&(e="all"),o=this.separate(t),t=this.walkPath(this._getFilesystemObject(),o),!t)throw Error("Invalid folder");return"all"!==e&&"files"!==e||(a=function(){var e;e=[];for(i in t)r.call(t,i)&&t[i]instanceof Array&&e.push(i);return e}(),a.sort(),"files"!==e)?(n=function(){var e;e=[];for(i in t)r.call(t,i)&&(t[i]instanceof Array||e.push(i));return e}(),n.sort(),"all"===e?n.concat(a):n):a},a.prototype._nextAvailableFileNumber=function(){var t,e,a,n,o,s,l,h,p;for(e=[],t=s=0,h=localStorage.length;h>=0?h>s:s>h;t=h>=0?++s:--s)e.push(localStorage.key(t));if(a=[],o=function(t){return function(e){var i,n;null==e&&(e=t._getFilesystemObject());for(i in e)r.call(e,i)&&(n=e[i],n instanceof Array?a.push(n[0]):a=a.concat(o(n)));return a}}(this),n=o().sort(function(t,e){return t-e}),0===n.length)return 0;for(t=l=0,p=n[n.length-1]+1;p>=0?p>=l:l>=p;t=p>=0?++l:--l)if(i.call(n,t)<0)return t},a.prototype.write=function(t,e){var r,i,a,n,o,s,l,h,p;if(p=this.separateWithFilename(t),h=p.path,s=p.name,o=this._getFilesystemObject(),a=this.walkPath(o,h),!a)throw Error("Invalid folder path");if(a.hasOwnProperty(s)){if(!(a[s]instanceof Array))throw Error("Cannot write to a folder");l=a[s][0]}else l=this._nextAvailableFileNumber();return r=JSON.stringify(e),i=this._fileName(l),n=localStorage.getItem(i),localStorage.setItem(i,r),a[s]=[l,r.length],this._setFilesystemObject(o)?r.length:(n?localStorage.setItem(i,n):localStorage.removeItem(i),!1)},a.prototype.read=function(t){var e;if(e=this.walkPathAndFile(this._getFilesystemObject(),this.separate(t)),!e)throw Error("No such file");return JSON.parse(localStorage.getItem(this._fileName(e[0])))},a.prototype.size=function(t){var e;return e=this.walkPathAndFile(this._getFilesystemObject(),this.separate(t)),(null!=e?e[1]:void 0)||-1},a.prototype.append=function(t,e){var r,i,a,n,o,s,l,h,p,c;if("string"!=typeof e)throw Error("Can only append strings to a file");if(c=this.separateWithFilename(t),p=c.path,l=c.name,s=this._getFilesystemObject(),n=this.walkPath(s,p),!n)throw Error("Invalid folder path");if(n.hasOwnProperty(l)){if(!(n[l]instanceof Array))throw Error("Cannot append to a folder");if(h=n[l][0],i=JSON.parse(localStorage.getItem(this._fileName(n[l][0]))),"string"!=typeof i)throw Error("Cannot append to a file unless it contains a string");e=i+e}else h=this._nextAvailableFileNumber();return r=JSON.stringify(e),a=this._fileName(h),o=localStorage.getItem(a),localStorage.setItem(a,r),n[l]=[h,r.length],this._setFilesystemObject(s)?r.length:(o?localStorage.setItem(a,o):localStorage.removeItem(a),!1)},a.prototype.rm=function(t){var e,i,a,n,o,s,l,h,p;if(h=this.separateWithFilename(t),t=h.path,o=h.name,!o)return!1;if(n=this._getFilesystemObject(),a=this.walkPath(n,t),!a)return!1;if(!a.hasOwnProperty(o))return!1;for(i=function(t){var e,a;if(t instanceof Array)return[t];a=[];for(e in t)r.call(t,e)&&(a=a.concat(i(t[e])));return a},p=i(a[o]),s=0,l=p.length;l>s;s++)e=p[s],localStorage.removeItem(this._fileName(e[0]));return delete a[o],this._setFilesystemObject(n),!0},a.prototype.cp=function(t,e){var r,i,a,n,o,s,l,h,p,c,f,u;if(s=this._getFilesystemObject(),f=this.separate(t),o=this.walkPathAndFile(s,f),!o)return!1;if(u=this.separateWithFilename(e),c=u.path,h=u.name,i=this.walkPath(s,c)){if(h){if(i.hasOwnProperty(h)){if(i[h]instanceof Array)return;if(i=i[h],h=f[f.length-1],i.hasOwnProperty(h))return}}else a=sourceName;r=localStorage.getItem(this._fileName(o[0])),p=this._nextAvailableFileNumber(),l=this._fileName(p);try{localStorage.setItem(l,r)}catch(y){return n=y,!1}return i[h]=[p,r.length],this._setFilesystemObject(s)?!0:(localStorage.removeItem(l),!1)}},a.prototype.mv=function(t,e){var r,i,a,n,o,s,l,h,p;if(a=this._getFilesystemObject(),h=this.separateWithFilename(t),o=h.path,n=h.name,s=this.walkPath(a,o),!s||!s.hasOwnProperty(n))throw Error("No such file or folder");if(l=n,p=this.separateWithFilename(e),o=p.path,n=p.name,r=this.walkPath(a,o),i=n,r){if(n){if(r.hasOwnProperty(n)){if(r[i]instanceof Array)return;if(r=r[i],i=l,r.hasOwnProperty(i))return}}else i=l;return r[i]=s[l],delete s[l],this._setFilesystemObject(a)}},a}()}).call(this);
//# sourceMappingURL=jsfs.min.js.map