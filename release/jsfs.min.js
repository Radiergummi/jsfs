(function(){var t=[].slice,e={}.hasOwnProperty,r=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1};window.FileSystem=function(){function o(t){this._name=""+t||"undefined",this._getFilesystemObject(),this._cwd=FileSystem.prototype.pathSeparator}var n;return o.prototype.pathSeparator="/",o.prototype.escapeCharacter="\\",o.prototype._cache={},o.prototype._storageName=function(){return""+this._name+"_filesystem"},o.prototype._fileName=function(t){return""+this._name+"_file_"+t},o.prototype._getFilesystemObject=function(){var t;return FileSystem.prototype._cache.hasOwnProperty(this._name)?FileSystem.prototype._cache[this._name]:(t=localStorage.getItem(this._storageName()),null===t&&localStorage.setItem(this._name,JSON.stringify(t={})),FileSystem.prototype._cache[this._name]=t)},o.prototype.getName=function(){return this._name},o.prototype.getCwd=function(){return this._cwd},o.prototype._changeFilesystem=function(t){var e,r,o;o=this._getFilesystemObject(),e=JSON.stringify(o);try{return t(o),localStorage.setItem(this._storageName(),JSON.stringify(o))}catch(n){throw r=n,this._cache[this._name]=JSON.parse(e),r}},n=function(){var e,r,o,n,i,a,s;for(n=arguments[0],i=2<=arguments.length?t.call(arguments,1):[],o="";n.length>0;){for(e=!1,r=a=0,s=i.length-1;s>a;r=a+=2)if(n.slice(0,i[r].length)===i[r]){o+=i[r+1],n=n.slice(i[r].length),e=!0;break}e||(o+=n[0],n=n.slice(1))}return o},o.prototype._splitPath=function(t){var e,r,o,i,a,s,l,p;for(i=FileSystem.prototype.pathSeparator,r=FileSystem.prototype.escapeCharacter,o=t.indexOf(i+i);o>-1;)t=t.slice(0,o)+t.slice(o+i.length),o=t.indexOf(i+i);for(t.slice(0,i.length)===i&&(t=t.slice(i.length)),t.slice(-i.length)===i&&(t=t.slice(0,-i.length)),l=n(t,r+i,i,r+r,r,i,"\n").split("\n"),p=[],a=0,s=l.length;s>a;a++)e=l[a],""!==e&&p.push(e);return p},o.prototype._joinPath=function(t){var e,r,o;return o=FileSystem.prototype.pathSeparator,e=FileSystem.prototype.escapeCharacter,function(){var i,a,s;for(s=[],i=0,a=t.length;a>i;i++)r=t[i],s.push(n(r,o,e+o,e,e+e));return s}().join(o)},o.prototype._toAbsolutePath=function(t,e){var r,o;return o=FileSystem.prototype.pathSeparator,e.slice(0,o.length)===o?e:(r=FileSystem.prototype._joinPath(FileSystem.prototype._splitPath(t).concat(FileSystem.prototype._splitPath(e))),r.slice(0,o.length)!==o&&(r=o+r),r)},o.prototype._toCanonicalPath=function(t){var e,r,o,n,i,a;for(e=[],a=FileSystem.prototype._splitPath(t),n=0,i=a.length;i>n;n++)o=a[n],"."!==o&&(".."===o?e.length>0&&e.pop():e.push(o));return e=FileSystem.prototype._joinPath(e),r=FileSystem.prototype.pathSeparator,e.slice(0,r.length)!==r&&(e=r+e),e},o.prototype._isValidCanonicalPath=function(t){var e,r,o,n,i;for(e=FileSystem.prototype._splitPath(t),o=this._getFilesystemObject(),n=0,i=e.length;i>n;n++)if(r=e[n],o=o[r],!o||o instanceof Array)return!1;return!0},o.prototype.cd=function(t){var e;return null==t&&(t=FileSystem.prototype.pathSeparator),e=FileSystem.prototype._toCanonicalPath(FileSystem.prototype._toAbsolutePath(this._cwd,t)),this._isValidCanonicalPath(e)?this._cwd=e:void 0},o.prototype.mkdir=function(t){var e,r,o;null==t&&(t="."),o=FileSystem.prototype._splitPath(FileSystem.prototype._toCanonicalPath(FileSystem.prototype._toAbsolutePath(this._cwd,t)));try{return r=!1,this._changeFilesystem(function(t){var e,n,i,a;for(a=[],n=0,i=o.length;i>n;n++)e=o[n],t.hasOwnProperty(e)||(t[e]={},r=!0),a.push(t=t[e]);return a}),r}catch(n){return e=n,!1}},o.prototype._nextAvailableFileNumber=function(){var t,o,n,i,a;if(n=function(t){return function(r){var o,i,a;null==r&&(r=t._getFilesystemObject()),i=[];for(o in r)e.call(r,o)&&(a=r[o],a instanceof Array?i.push(a[0]):i.concat(n(a)));return i}}(this),o=n().sort(function(t,e){return t-e}),0===o.length)return 0;for(t=i=0,a=o[o.length-1]+1;a>=0?a>=i:i>=a;t=a>=0?++i:--i)if(r.call(o,t)<0)return t},o.prototype.write=function(t,e){var r,o,n,i;o=FileSystem.prototype._splitPath(FileSystem.prototype._toCanonicalPath(FileSystem.prototype._toAbsolutePath(this._cwd,t))),n=o[o.length-1],i=!1;try{return this._changeFilesystem(function(t){return function(r){var a,s,l,p,h,c,y,u;for(u=o.slice(0,-1),c=0,y=u.length;y>c;c++){if(h=u[c],!r.hasOwnProperty(h||r[h]instanceof Array))throw Error("Invalid folder path");r=r[h]}if(r.hasOwnProperty(n)){if(!(r[n]instanceof Array))throw Error("Cannot write to a folder");p=r[n][0]}else p=t._nextAvailableFileNumber();return a=JSON.stringify(e),s=t._fileName(p),l=localStorage.getItem(s),localStorage.setItem(s,a),i={past:l,name:t._fileName(p),size:a.length},r[n]=[p,a.length]}}(this)),i.size}catch(a){throw r=a,i&&(i.past?localStorage.setItem(i.name,i.past):localStorage.removeItem(i.name)),r}},o.prototype.read=function(t){var e,r,o,n,i,a,s;for(r=FileSystem.prototype._splitPath(FileSystem.prototype._toCanonicalPath(FileSystem.prototype._toAbsolutePath(this._cwd,t))),o=r[r.length-1],e=this._getFilesystemObject(),s=r.slice(0,-1),i=0,a=s.length;a>i;i++){if(n=s[i],!e.hasOwnProperty(n||e[n]instanceof Array))throw Error("Invalid folder path");e=e[n]}if(!e.hasOwnProperty(o||!(e[o]instanceof Array)))throw Error("No such file in that folder");return JSON.parse(localStorage.getItem(this._fileName(e[o][0])))},o}()}).call(this);
//# sourceMappingURL=jsfs.min.js.map